<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网上都说操作真实 DOM 慢，但测试结果却比 React 更快，为什么？ | DailyClack:))</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.png">
    <meta name="description" content="Do not go gentle into that good night.">
    
    <link rel="preload" href="/assets/css/0.styles.21e7d717.css" as="style"><link rel="preload" href="/assets/js/app.1690ea5b.js" as="script"><link rel="preload" href="/assets/js/2.8b426e0b.js" as="script"><link rel="preload" href="/assets/js/53.3736c0df.js" as="script"><link rel="prefetch" href="/assets/js/10.b4249a64.js"><link rel="prefetch" href="/assets/js/100.d2ed3062.js"><link rel="prefetch" href="/assets/js/101.82e5255c.js"><link rel="prefetch" href="/assets/js/102.57b66d79.js"><link rel="prefetch" href="/assets/js/103.68ac3415.js"><link rel="prefetch" href="/assets/js/104.bdb66e38.js"><link rel="prefetch" href="/assets/js/105.3ffc704c.js"><link rel="prefetch" href="/assets/js/106.155fc0ef.js"><link rel="prefetch" href="/assets/js/107.d9f013b0.js"><link rel="prefetch" href="/assets/js/108.2d7585e5.js"><link rel="prefetch" href="/assets/js/109.deea2371.js"><link rel="prefetch" href="/assets/js/11.7b715a0d.js"><link rel="prefetch" href="/assets/js/110.6424ba3f.js"><link rel="prefetch" href="/assets/js/111.9143eef7.js"><link rel="prefetch" href="/assets/js/112.e1b93c71.js"><link rel="prefetch" href="/assets/js/113.b6eca80e.js"><link rel="prefetch" href="/assets/js/114.31acb673.js"><link rel="prefetch" href="/assets/js/115.9f81939f.js"><link rel="prefetch" href="/assets/js/116.0a880c6e.js"><link rel="prefetch" href="/assets/js/117.15928222.js"><link rel="prefetch" href="/assets/js/118.572b9798.js"><link rel="prefetch" href="/assets/js/119.0928b6b7.js"><link rel="prefetch" href="/assets/js/12.8a7aa936.js"><link rel="prefetch" href="/assets/js/120.239fac2c.js"><link rel="prefetch" href="/assets/js/121.18c5bb8c.js"><link rel="prefetch" href="/assets/js/122.5ea3cec9.js"><link rel="prefetch" href="/assets/js/123.c20cc51f.js"><link rel="prefetch" href="/assets/js/124.f92dc613.js"><link rel="prefetch" href="/assets/js/125.789a0cf6.js"><link rel="prefetch" href="/assets/js/126.c57c880c.js"><link rel="prefetch" href="/assets/js/127.10838350.js"><link rel="prefetch" href="/assets/js/128.8d4fe70b.js"><link rel="prefetch" href="/assets/js/129.ac5584b9.js"><link rel="prefetch" href="/assets/js/13.06f93efa.js"><link rel="prefetch" href="/assets/js/130.bf6abaa1.js"><link rel="prefetch" href="/assets/js/131.090de7bd.js"><link rel="prefetch" href="/assets/js/132.9ca4fb47.js"><link rel="prefetch" href="/assets/js/133.77ef3752.js"><link rel="prefetch" href="/assets/js/134.490871a9.js"><link rel="prefetch" href="/assets/js/135.fe01f391.js"><link rel="prefetch" href="/assets/js/136.e014c7a8.js"><link rel="prefetch" href="/assets/js/137.21468943.js"><link rel="prefetch" href="/assets/js/138.c29ed5f4.js"><link rel="prefetch" href="/assets/js/139.91c25477.js"><link rel="prefetch" href="/assets/js/14.21f3c2e8.js"><link rel="prefetch" href="/assets/js/140.1a620ca6.js"><link rel="prefetch" href="/assets/js/141.59f02fe4.js"><link rel="prefetch" href="/assets/js/142.f156fffa.js"><link rel="prefetch" href="/assets/js/143.255d8be1.js"><link rel="prefetch" href="/assets/js/144.f67c812f.js"><link rel="prefetch" href="/assets/js/145.8a8e4a2a.js"><link rel="prefetch" href="/assets/js/146.78d38cbc.js"><link rel="prefetch" href="/assets/js/147.1f3b713f.js"><link rel="prefetch" href="/assets/js/148.6328d40a.js"><link rel="prefetch" href="/assets/js/149.f7e71491.js"><link rel="prefetch" href="/assets/js/15.058a09a2.js"><link rel="prefetch" href="/assets/js/150.0884a870.js"><link rel="prefetch" href="/assets/js/151.77ce5077.js"><link rel="prefetch" href="/assets/js/152.4abd819f.js"><link rel="prefetch" href="/assets/js/153.4ea1b82e.js"><link rel="prefetch" href="/assets/js/154.bfaad546.js"><link rel="prefetch" href="/assets/js/155.b4774e19.js"><link rel="prefetch" href="/assets/js/156.4c70b0f3.js"><link rel="prefetch" href="/assets/js/157.95d9bd28.js"><link rel="prefetch" href="/assets/js/158.f30d58f4.js"><link rel="prefetch" href="/assets/js/159.5d6eff00.js"><link rel="prefetch" href="/assets/js/16.79e1c3f4.js"><link rel="prefetch" href="/assets/js/160.3b4ea212.js"><link rel="prefetch" href="/assets/js/161.a67cfeb0.js"><link rel="prefetch" href="/assets/js/162.118cbee5.js"><link rel="prefetch" href="/assets/js/163.7867d86e.js"><link rel="prefetch" href="/assets/js/164.a20d0e04.js"><link rel="prefetch" href="/assets/js/165.fc35259c.js"><link rel="prefetch" href="/assets/js/166.3b31baca.js"><link rel="prefetch" href="/assets/js/167.942c22a1.js"><link rel="prefetch" href="/assets/js/168.57f429d1.js"><link rel="prefetch" href="/assets/js/169.d0615ea2.js"><link rel="prefetch" href="/assets/js/17.2ea7c271.js"><link rel="prefetch" href="/assets/js/170.db44c4f5.js"><link rel="prefetch" href="/assets/js/171.94665a62.js"><link rel="prefetch" href="/assets/js/172.9b016b91.js"><link rel="prefetch" href="/assets/js/173.0ce8f193.js"><link rel="prefetch" href="/assets/js/174.d5e3e2e7.js"><link rel="prefetch" href="/assets/js/175.e4ff0818.js"><link rel="prefetch" href="/assets/js/176.1dfacce8.js"><link rel="prefetch" href="/assets/js/177.cb157261.js"><link rel="prefetch" href="/assets/js/178.014559b7.js"><link rel="prefetch" href="/assets/js/179.1ebb77d4.js"><link rel="prefetch" href="/assets/js/18.91e124f7.js"><link rel="prefetch" href="/assets/js/180.a635fa28.js"><link rel="prefetch" href="/assets/js/181.72d5610e.js"><link rel="prefetch" href="/assets/js/182.cefd1fa1.js"><link rel="prefetch" href="/assets/js/183.e684e5b3.js"><link rel="prefetch" href="/assets/js/184.b4761c6c.js"><link rel="prefetch" href="/assets/js/185.08e77978.js"><link rel="prefetch" href="/assets/js/186.7197c118.js"><link rel="prefetch" href="/assets/js/187.cef57676.js"><link rel="prefetch" href="/assets/js/188.ddedcd97.js"><link rel="prefetch" href="/assets/js/189.c59b23a5.js"><link rel="prefetch" href="/assets/js/19.7804539c.js"><link rel="prefetch" href="/assets/js/190.aca184e4.js"><link rel="prefetch" href="/assets/js/191.1fc9a77e.js"><link rel="prefetch" href="/assets/js/192.56203342.js"><link rel="prefetch" href="/assets/js/193.72d88b09.js"><link rel="prefetch" href="/assets/js/194.05f30d33.js"><link rel="prefetch" href="/assets/js/195.f85beac8.js"><link rel="prefetch" href="/assets/js/196.8e5e81de.js"><link rel="prefetch" href="/assets/js/197.c0ac31d4.js"><link rel="prefetch" href="/assets/js/198.3ce990eb.js"><link rel="prefetch" href="/assets/js/199.e0444803.js"><link rel="prefetch" href="/assets/js/20.b8761bfc.js"><link rel="prefetch" href="/assets/js/200.713a2cca.js"><link rel="prefetch" href="/assets/js/201.bcb0ca06.js"><link rel="prefetch" href="/assets/js/202.264c22fc.js"><link rel="prefetch" href="/assets/js/203.889bdc28.js"><link rel="prefetch" href="/assets/js/204.63ae886e.js"><link rel="prefetch" href="/assets/js/205.cdebce49.js"><link rel="prefetch" href="/assets/js/21.175e2e46.js"><link rel="prefetch" href="/assets/js/22.75bedabf.js"><link rel="prefetch" href="/assets/js/23.225e9bd4.js"><link rel="prefetch" href="/assets/js/24.cdee11cc.js"><link rel="prefetch" href="/assets/js/25.a9bcf824.js"><link rel="prefetch" href="/assets/js/26.a258a9cc.js"><link rel="prefetch" href="/assets/js/27.c91035b4.js"><link rel="prefetch" href="/assets/js/28.3d2e1e58.js"><link rel="prefetch" href="/assets/js/29.b229f9a6.js"><link rel="prefetch" href="/assets/js/3.ea542717.js"><link rel="prefetch" href="/assets/js/30.4c82874f.js"><link rel="prefetch" href="/assets/js/31.485a22e3.js"><link rel="prefetch" href="/assets/js/32.ee904b6e.js"><link rel="prefetch" href="/assets/js/33.b2edc1fc.js"><link rel="prefetch" href="/assets/js/34.720bd9ab.js"><link rel="prefetch" href="/assets/js/35.2d4556c2.js"><link rel="prefetch" href="/assets/js/36.4b9986d5.js"><link rel="prefetch" href="/assets/js/37.2382f1ed.js"><link rel="prefetch" href="/assets/js/38.c97bd080.js"><link rel="prefetch" href="/assets/js/39.fa96d23d.js"><link rel="prefetch" href="/assets/js/4.7f66c088.js"><link rel="prefetch" href="/assets/js/40.9767bc7c.js"><link rel="prefetch" href="/assets/js/41.fc2663cb.js"><link rel="prefetch" href="/assets/js/42.4febd707.js"><link rel="prefetch" href="/assets/js/43.75bf45d0.js"><link rel="prefetch" href="/assets/js/44.28247673.js"><link rel="prefetch" href="/assets/js/45.0c21b9ec.js"><link rel="prefetch" href="/assets/js/46.d1e9a2ee.js"><link rel="prefetch" href="/assets/js/47.7578c041.js"><link rel="prefetch" href="/assets/js/48.ad301eec.js"><link rel="prefetch" href="/assets/js/49.952f44b7.js"><link rel="prefetch" href="/assets/js/5.788fc2c6.js"><link rel="prefetch" href="/assets/js/50.9561eb4d.js"><link rel="prefetch" href="/assets/js/51.622dde08.js"><link rel="prefetch" href="/assets/js/52.7d1385e5.js"><link rel="prefetch" href="/assets/js/54.eafb2673.js"><link rel="prefetch" href="/assets/js/55.4407a20b.js"><link rel="prefetch" href="/assets/js/56.78773290.js"><link rel="prefetch" href="/assets/js/57.beaa65ec.js"><link rel="prefetch" href="/assets/js/58.00ec64ea.js"><link rel="prefetch" href="/assets/js/59.7be0dbd3.js"><link rel="prefetch" href="/assets/js/6.5334eda4.js"><link rel="prefetch" href="/assets/js/60.21b53ecd.js"><link rel="prefetch" href="/assets/js/61.2cd0a41e.js"><link rel="prefetch" href="/assets/js/62.283dd811.js"><link rel="prefetch" href="/assets/js/63.d400c5ba.js"><link rel="prefetch" href="/assets/js/64.dd32c429.js"><link rel="prefetch" href="/assets/js/65.d27371c8.js"><link rel="prefetch" href="/assets/js/66.6ab456d2.js"><link rel="prefetch" href="/assets/js/67.a53055fc.js"><link rel="prefetch" href="/assets/js/68.d40429e2.js"><link rel="prefetch" href="/assets/js/69.5b2b43f6.js"><link rel="prefetch" href="/assets/js/7.edf2adb9.js"><link rel="prefetch" href="/assets/js/70.3c092199.js"><link rel="prefetch" href="/assets/js/71.8d40b052.js"><link rel="prefetch" href="/assets/js/72.b43969f8.js"><link rel="prefetch" href="/assets/js/73.92e908e6.js"><link rel="prefetch" href="/assets/js/74.9222c7d1.js"><link rel="prefetch" href="/assets/js/75.9206ddef.js"><link rel="prefetch" href="/assets/js/76.55c11690.js"><link rel="prefetch" href="/assets/js/77.8ef04673.js"><link rel="prefetch" href="/assets/js/78.8524533a.js"><link rel="prefetch" href="/assets/js/79.b4fac536.js"><link rel="prefetch" href="/assets/js/8.cdd2ace8.js"><link rel="prefetch" href="/assets/js/80.27bd61ba.js"><link rel="prefetch" href="/assets/js/81.06046cc9.js"><link rel="prefetch" href="/assets/js/82.f4ad3f32.js"><link rel="prefetch" href="/assets/js/83.e56d08c1.js"><link rel="prefetch" href="/assets/js/84.917f4539.js"><link rel="prefetch" href="/assets/js/85.ba572d7f.js"><link rel="prefetch" href="/assets/js/86.ac731983.js"><link rel="prefetch" href="/assets/js/87.a89a9da5.js"><link rel="prefetch" href="/assets/js/88.10dc15a1.js"><link rel="prefetch" href="/assets/js/89.9bde578f.js"><link rel="prefetch" href="/assets/js/9.f68028e8.js"><link rel="prefetch" href="/assets/js/90.ba0ee89b.js"><link rel="prefetch" href="/assets/js/91.90554a0e.js"><link rel="prefetch" href="/assets/js/92.95e065c5.js"><link rel="prefetch" href="/assets/js/93.0217650a.js"><link rel="prefetch" href="/assets/js/94.8e61d7d0.js"><link rel="prefetch" href="/assets/js/95.e9e39a74.js"><link rel="prefetch" href="/assets/js/96.d73f72cd.js"><link rel="prefetch" href="/assets/js/97.92a26f1b.js"><link rel="prefetch" href="/assets/js/98.9e8f3b67.js"><link rel="prefetch" href="/assets/js/99.a76aec74.js">
    <link rel="stylesheet" href="/assets/css/0.styles.21e7d717.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DailyClack:))</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/001_home/todos.html" class="sidebar-link">土豆 💡</a></li><li><a href="/articles/001_home/bookmark.html" class="sidebar-link">书签 🖖</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>q&amp;a</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/000_qa/000001_algorithm.html" class="sidebar-link">🤔数据结构与算法</a></li><li><a href="/articles/000_qa/000002_browser.html" class="sidebar-link">🤔浏览器</a></li><li><a href="/articles/000_qa/000003_css.html" class="sidebar-link">🤔CSS</a></li><li><a href="/articles/000_qa/000004_ecmascript.html" class="sidebar-link">🤔ECMAScript</a></li><li><a href="/articles/000_qa/000005_write.html" class="sidebar-link">🤔手写代码</a></li><li><a href="/articles/000_qa/000006_engineering.html" class="sidebar-link">🤔工程化</a></li><li><a href="/articles/000_qa/000007_framework.html" class="sidebar-link">🤔框架</a></li><li><a href="/articles/000_qa/000008_network.html" class="sidebar-link">🤔网络</a></li><li><a href="/articles/000_qa/000009_nodejs.html" class="sidebar-link">🤔Nodejs</a></li><li><a href="/articles/000_qa/000010_open.html" class="sidebar-link">🤔开放问题</a></li><li><a href="/articles/000_qa/000011_links.html" class="sidebar-link">🤔链接汇总</a></li><li><a href="/articles/000_qa/000012_pics.html" class="sidebar-link">🤔一图胜千言</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>[读书笔记]浏览器工作原理与实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/100_readingNotes/browser/macroPerspective.html" class="sidebar-link">🤔宏观视角下的浏览器</a></li><li><a href="/articles/100_readingNotes/browser/executionMechanism.html" class="sidebar-link">🤔浏览器中的JavaScript执行机制</a></li><li><a href="/articles/100_readingNotes/browser/howV8Works.html" class="sidebar-link">🤔V8工作原理</a></li><li><a href="/articles/100_readingNotes/browser/eventLoop.html" class="sidebar-link">🤔浏览器中的页面循环系统</a></li><li><a href="/articles/100_readingNotes/browser/pageInBrowser.html" class="sidebar-link">🤔浏览器中的页面</a></li><li><a href="/articles/100_readingNotes/browser/networkInBrowser.html" class="sidebar-link">🤔浏览器中的网络</a></li><li><a href="/articles/100_readingNotes/browser/browserSecurity.html" class="sidebar-link">🤔浏览器安全</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>标准库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/004_javascript/standardLibrary/array.html" class="sidebar-link">🤔Array</a></li><li><a href="/articles/004_javascript/standardLibrary/object.html" class="sidebar-link">🤔Object</a></li><li><a href="/articles/004_javascript/standardLibrary/promise.html" class="sidebar-link">🤔Promise</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/004_javascript/004002_aboutLazyMan.html" class="sidebar-link">📝一个关于LazyMan的故事</a></li><li><a href="/articles/004_javascript/004003_arrayPrototypeReduce.html" class="sidebar-link">⭐️浅析Array.prototype.reduce</a></li><li><a href="/articles/004_javascript/004007_aboutReduce.html" class="sidebar-link">📝reduce用法总结</a></li><li><a href="/articles/004_javascript/004004_debounceAndThrottle.html" class="sidebar-link">⭐️防抖与节流</a></li><li><a href="/articles/004_javascript/004005_jsonStringify.html" class="sidebar-link">⭐️JSON.stringify总结</a></li><li><a href="/articles/004_javascript/004006_promiseLimit.html" class="sidebar-link">⭐️Promise并发控制</a></li><li><a href="/articles/004_javascript/004008_extensionCompare.html" class="sidebar-link">📝继承对比</a></li><li><a href="/articles/004_javascript/004009_eventloopInBrowserOrNodejs.html" class="sidebar-link">📝浏览器与nodejs中的事件循环</a></li><li><a href="/articles/004_javascript/004010_completeAssign.html" class="sidebar-link">可以拷贝属性描述符的Object.assign</a></li><li><a href="/articles/004_javascript/004011_createAndAssignInExtends.html" class="sidebar-link">Object.create和Object.assign在继承中的利用</a></li><li><a href="/articles/004_javascript/clone.html" class="sidebar-link">深拷贝浅析</a></li><li><a href="/articles/004_javascript/eventloop.html" class="sidebar-link">JavaScript并发模型EventLoop可视化描述</a></li><li><a href="/articles/004_javascript/nextTick.html" class="sidebar-link">从EventLoop看Vue的nextTick</a></li><li><a href="/articles/004_javascript/fireEvent.html" class="sidebar-link">自定义事件</a></li><li><a href="/articles/004_javascript/operatorPrecedence.html" class="sidebar-link">操作符的优先级</a></li><li><a href="/articles/004_javascript/templateEngineWith50LinesOfCode.html" class="sidebar-link">50行代码的JS模板引擎</a></li><li><a href="/articles/004_javascript/operatorIn.html" class="sidebar-link">in 运算符</a></li><li><a href="/articles/004_javascript/momentjs.html" class="sidebar-link">安利一个时间格式化插件</a></li><li><a href="/articles/004_javascript/functionOverload.html" class="sidebar-link">函数的重载</a></li><li><a href="/articles/004_javascript/004013_80percent.html" class="sidebar-link">⭐️[读]80%应聘者不及格系列：闭包</a></li><li><a href="/articles/004_javascript/004014_advantagesOfVirtualDom.html" aria-current="page" class="active sidebar-link">网上都说操作真实 DOM 慢，但测试结果却比 React 更快，为什么？</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>函数式编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/004_javascript/functional/compose.html" class="sidebar-link">compose</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Polyfill</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/004_javascript/polyfill/mypromise.html" class="sidebar-link">My Promise polyfill (undone</a></li><li><a href="/articles/004_javascript/polyfill/promise.html" class="sidebar-link">Promise polyfill from community</a></li><li><a href="/articles/004_javascript/polyfill/bind.html" class="sidebar-link">Function.prototype.bind</a></li><li><a href="/articles/004_javascript/polyfill/call.html" class="sidebar-link">Function.prototype.call</a></li><li><a href="/articles/004_javascript/polyfill/apply.html" class="sidebar-link">Function.prototype.apply</a></li><li><a href="/articles/004_javascript/polyfill/new.html" class="sidebar-link">new</a></li><li><a href="/articles/004_javascript/polyfill/const.html" class="sidebar-link">const</a></li><li><a href="/articles/004_javascript/polyfill/instanceof.html" class="sidebar-link">instanceof</a></li><li><a href="/articles/004_javascript/polyfill/create.html" class="sidebar-link">Object.assign</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/011_engineering/011001_optimize.html" class="sidebar-link">📝优化</a></li><li><a href="/articles/011_engineering/011002_hmr.html" class="sidebar-link">📝HMR</a></li><li><a href="/articles/011_engineering/011003_devServer.html" class="sidebar-link">📝devServer</a></li><li><a href="/articles/011_engineering/011004_babel.html" class="sidebar-link">📝Babel使用总结</a></li><li><a href="/articles/011_engineering/011006_feSeamlessBuryingPoint.html" class="sidebar-link">[读]200行代码实现前端无痕埋点</a></li><li><a href="/articles/011_engineering/011007_skeletonScreenSolution.html" class="sidebar-link">骨架屏方案</a></li><li><a href="/articles/011_engineering/011008_vueProjectPerformanceOptimization.html" class="sidebar-link">[读]Vue项目Webpack优化实践，构建效率提高50%</a></li><li><a href="/articles/011_engineering/011009_gitBestPractices.html" class="sidebar-link">Git标准化实践</a></li><li><a href="/articles/011_engineering/011010_microFe.html" class="sidebar-link">微前端总结</a></li><li><a href="/articles/011_engineering/011011_upload.html" class="sidebar-link">文件上传的几种方式</a></li><li><a href="/articles/011_engineering/011012_webpack.html" class="sidebar-link">webpack 知识点</a></li><li><a href="/articles/011_engineering/011013_i18ntester.html" class="sidebar-link">使用e2e测试工具nightwatch检测小语种版本国际化异常</a></li><li><a href="/articles/011_engineering/011014_performanceOptimization.html" class="sidebar-link">webpack性能优化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>模块化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/004_javascript/modularization/AMD.html" class="sidebar-link">AMD</a></li><li><a href="/articles/004_javascript/modularization/CMD.html" class="sidebar-link">CMD</a></li><li><a href="/articles/004_javascript/modularization/CJS.html" class="sidebar-link">CJS</a></li><li><a href="/articles/004_javascript/modularization/ESM.html" class="sidebar-link">ESM</a></li><li><a href="/articles/004_javascript/modularization/UMD.html" class="sidebar-link">UMD</a></li><li><a href="/articles/004_javascript/modularization/commonjsAndAmdAndEs6module.html" class="sidebar-link">CJS、AMD、CMD与ESM对比</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ECMAScript6</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/005_es6/005001_stringExtension.html" class="sidebar-link">⭐️字符串的扩展</a></li><li><a href="/articles/005_es6/005002_stringMethods.html" class="sidebar-link">⭐️字符串的新增方法</a></li><li><a href="/articles/005_es6/005003_numberExtension.html" class="sidebar-link">⭐️数值的扩展</a></li><li><a href="/articles/005_es6/005004_functionExtension.html" class="sidebar-link">⭐️函数的扩展</a></li><li><a href="/articles/005_es6/005005_arrayMethods.html" class="sidebar-link">⭐️数组的方法</a></li><li><a href="/articles/005_es6/005006_objectExtension.html" class="sidebar-link">⭐️对象的扩展</a></li><li><a href="/articles/005_es6/005007_objectMethods.html" class="sidebar-link">📝对象的方法</a></li><li><a href="/articles/005_es6/005008_symbol.html" class="sidebar-link">📝Symbol</a></li><li><a href="/articles/005_es6/005009_setmap.html" class="sidebar-link">📝Set &amp; Map</a></li><li><a href="/articles/005_es6/005010_proxy.html" class="sidebar-link">⭐️Proxy</a></li><li><a href="/articles/005_es6/005011_reflect.html" class="sidebar-link">⭐️Reflect</a></li><li><a href="/articles/005_es6/005012_promise.html" class="sidebar-link">📝Promise</a></li><li><a href="/articles/005_es6/005013_generator.html" class="sidebar-link">⭐️Generator函数：协议与语法</a></li><li><a href="/articles/005_es6/005014_generator.html" class="sidebar-link">⭐️Generator函数：异步应用</a></li><li><a href="/articles/005_es6/005015_generator.html" class="sidebar-link">⭐️Generator函数：co模块浅析</a></li><li><a href="/articles/005_es6/005016_async.html" class="sidebar-link">📝async函数</a></li><li><a href="/articles/005_es6/005017_class.html" class="sidebar-link">📝class</a></li><li><a href="/articles/005_es6/005018_module.html" class="sidebar-link">📝module</a></li><li><a href="/articles/005_es6/005019_decorator.html" class="sidebar-link">📝Decorator</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML5</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/002_browser/002001_newFeaturesOfHTML5.html" class="sidebar-link">⭐️HTML5新特性</a></li><li><a href="/articles/002_browser/002003_historyApi.html" class="sidebar-link">⭐️History API</a></li><li><a href="/articles/002_browser/002004_performanceApi.html" class="sidebar-link">⭐️Performance API</a></li><li><a href="/articles/002_browser/002005_storageApi.html" class="sidebar-link">⭐️LocalStorage &amp; SessionStorage API</a></li><li><a href="/articles/002_browser/002006_event.html" class="sidebar-link">⭐️Event对象</a></li><li><a href="/articles/002_browser/002002_draggableApi.html" class="sidebar-link">Draggable API</a></li><li><a href="/articles/002_browser/002007_intersectionObserverApi.html" class="sidebar-link">Intersection Observer API</a></li><li><a href="/articles/002_browser/002008_messageChannelApi.html" class="sidebar-link">MessageChannel API</a></li><li><a href="/articles/002_browser/002009_performanceApiAndHtmlLifecycle.html" class="sidebar-link">⭐️Performance API 与 HTML文档的生命周期</a></li><li><a href="/articles/002_browser/002010_rasterization.html" class="sidebar-link">🤔渲染流水线中的光栅化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/003_layout/003001_flex.html" class="sidebar-link">⭐️Flex笔记</a></li><li><a href="/articles/003_layout/003002_generalLayoutScheme.html" class="sidebar-link">⭐️常规布局方案总结</a></li><li><a href="/articles/003_layout/003003_position.html" class="sidebar-link">⭐️position属性解析</a></li><li><a href="/articles/003_layout/003004_grailLayout.html" class="sidebar-link">⭐️圣杯与双飞翼</a></li><li><a href="/articles/003_layout/003005_pointerEvents.html" class="sidebar-link">⭐️神奇的pointer-events</a></li><li><a href="/articles/003_layout/css3GpuHardwareAccelerated.html" class="sidebar-link">CSS3的GPU加速浅析</a></li><li><a href="/articles/003_layout/cssDebuggerWithOneLineCode.html" class="sidebar-link">一行CSS调试代码</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/006_frontend/006001_frommemorycacheAndFromdiskcache.html" class="sidebar-link">⭐️from memory cache与from disk cache详解</a></li><li><a href="/articles/006_frontend/curl.html" class="sidebar-link">CURL常用的十种方式</a></li><li><a href="/articles/006_frontend/mime.html" class="sidebar-link">多用途Internet邮件扩展（MIME）类型</a></li><li><a href="/articles/006_frontend/wireshark.html" class="sidebar-link">Wireshark的使用笔记</a></li><li><a href="/articles/006_frontend/dollarInChrome.html" class="sidebar-link">JavaScript中的$$(*)代表什么和$选择器的由来</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/007_networkProtocol/007001_cookie.html" class="sidebar-link">⭐️HTTP Cookie</a></li><li><a href="/articles/007_networkProtocol/007002_httpNote.html" class="sidebar-link">⭐️图解HTTP读书笔记</a></li><li><a href="/articles/007_networkProtocol/007003_queryStringAndFormDataAndRequestPayload.html" class="sidebar-link">⭐️Query String &amp; Form Data &amp; Request Payload</a></li><li><a href="/articles/007_networkProtocol/007004_tcp.html" class="sidebar-link">📝TCP协议笔记</a></li><li><a href="/articles/007_networkProtocol/007005_https.html" class="sidebar-link">📝HTTPS笔记</a></li><li><a href="/articles/007_networkProtocol/007006_http2.html" class="sidebar-link">📝HTTP2.0笔记</a></li><li><a href="/articles/007_networkProtocol/007007_websocket.html" class="sidebar-link">📝Websocket协议笔记</a></li><li><a href="/articles/007_networkProtocol/007008_requestProcess.html" class="sidebar-link">📝从输入URL到界面展示过程</a></li><li><a href="/articles/007_networkProtocol/007009_httpCache.html" class="sidebar-link">⭐️HTTP缓存方案</a></li><li><a href="/articles/007_networkProtocol/localhostAnd127.0.0.1.html" class="sidebar-link">localhost和127.0.0.1的区别</a></li><li><a href="/articles/007_networkProtocol/007010_tcp.html" class="sidebar-link">数据包大小对网络的影响 —— MTU 与 MSS 的奥秘</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/008_algorithm/008001_complexity.html" class="sidebar-link">📝复杂度分析规则</a></li><li><a href="/articles/008_algorithm/008002_arraySort.html" class="sidebar-link">⭐️数组排序</a></li><li><a href="/articles/008_algorithm/008003_arrayFlat.html" class="sidebar-link">📝数组扁平化</a></li><li><a href="/articles/008_algorithm/008004_dynamicProgramming.html" class="sidebar-link">📝动态规划算法题草稿</a></li><li><a href="/articles/008_algorithm/008005_draft.html" class="sidebar-link">📝算法题草稿</a></li><li><a href="/articles/008_algorithm/008006_dataStructure.html" class="sidebar-link">📝数据结构</a></li><li><a href="/articles/008_algorithm/008007_arraySortPlus.html" class="sidebar-link">📝数组排序再总结</a></li><li><a href="/articles/008_algorithm/008009_binaryTree.html" class="sidebar-link">📝二叉树</a></li><li><a href="/articles/008_algorithm/008010_summary.html" class="sidebar-link">数据结构与算法总结</a></li><li><a href="/articles/008_algorithm/otherArrayOperations.html" class="sidebar-link">其他数组操作</a></li><li><a href="/articles/008_algorithm/interviewQuestion.html" class="sidebar-link">一些面试题吧算是</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nodejs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/009_node/009001_koa-compose.html" class="sidebar-link">❗️koa-compose浅析</a></li><li><a href="/articles/009_node/009002_nodebestpractices.html" class="sidebar-link">Node.js 最佳实践</a></li><li><a href="/articles/009_node/nodemodule.html" class="sidebar-link">深入NodeJs模块系统</a></li><li><a href="/articles/009_node/packagejsonMainModueAndBrowser.html" class="sidebar-link">模块入口文件优先级</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/010_framework/010001_snabbdomCodeReview.html" class="sidebar-link">⭐️snabbdom源码分析</a></li><li><a href="/articles/010_framework/010002_vueCli3.html" class="sidebar-link">📝VueCli3使用总结</a></li><li><a href="/articles/010_framework/010003_vueMini.html" class="sidebar-link">📝从0到0.1实现一个Vuejs mini</a></li><li><a href="/articles/010_framework/010004_reactQA.html" class="sidebar-link">react常见问题总结</a></li><li><a href="/articles/010_framework/vueAsyncErrorHandler.html" class="sidebar-link">Vue中异步函数的异常捕获探讨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue Code Review</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/010_framework/vueCodeReview/010001001_codereview.html" class="sidebar-link">📝Vue源码解析（一）：主流程</a></li><li><a href="/articles/010_framework/vueCodeReview/010001002_codereview.html" class="sidebar-link">📝Vue源码解析（二）：响应式处理</a></li><li><a href="/articles/010_framework/vueCodeReview/010001003_codereview.html" class="sidebar-link">📝Vue源码解析（三）：更新流程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端安全</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/012_webSecurity/012001_xss.html" class="sidebar-link">⭐️XSS</a></li><li><a href="/articles/012_webSecurity/012002_csrf.html" class="sidebar-link">⭐️CSRF</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>[读书笔记]你不知道的JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/100_readingNotes/uDontKnowJs/FirstVolumeChapterOne.html" class="sidebar-link">你不知道的JavaScript（上卷）</a></li><li><a href="/articles/100_readingNotes/uDontKnowJs/SecondVolumeChapterOne.html" class="sidebar-link">你不知道的JavaScript（中卷）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>[读书笔记]HTTP权威指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/100_readingNotes/theDefinitiveGuide4http/theDefinitiveGuide4http.html" class="sidebar-link">HTTP权威指南</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>[读书笔记]高级程序设计</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/100_readingNotes/professional/chapter6.html" class="sidebar-link">面向对象的程序设计</a></li><li><a href="/articles/100_readingNotes/professional/chapter7.html" class="sidebar-link">函数表达式</a></li><li><a href="/articles/100_readingNotes/professional/chapter13.html" class="sidebar-link">事件</a></li><li><a href="/articles/100_readingNotes/professional/chapter14.html" class="sidebar-link">表单脚本</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/300_computer/base.html" class="sidebar-link">计算机基础</a></li><li><a href="/articles/300_computer/300001_ipc.html" class="sidebar-link">进程间通信的几种方式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="网上都说操作真实-dom-慢-但测试结果却比-react-更快-为什么"><a href="#网上都说操作真实-dom-慢-但测试结果却比-react-更快-为什么" class="header-anchor">#</a> 网上都说操作真实 DOM 慢，但测试结果却比 React 更快，为什么？</h1> <blockquote><p>作者：尤雨溪
链接：https://www.zhihu.com/question/31809713/answer/53544875
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p></blockquote> <p>这里面有好几个方面的问题。</p> <ol><li>原生 DOM 操作 vs. 通过框架封装操作。
这是一个性能 vs. 可维护性的取舍。框架的意义在于为你掩盖底层的 DOM 操作，让你用更声明式的方式来描述你的目的，从而让你的代码更容易维护。没有任何框架可以比纯手动的优化 DOM 操作更快，因为框架的 DOM 操作层需要应对任何上层 API 可能产生的操作，它的实现必须是普适的。针对任何一个 benchmark，我都可以写出比任何框架更快的手动优化，但是那有什么意义呢？在构建一个实际应用的时候，你难道为每一个地方都去做手动优化吗？出于可维护性的考虑，这显然不可能。框架给你的保证是，你在不需要手动优化的情况下，我依然可以给你提供过得去的性能。</li> <li>对 React 的 Virtual DOM 的误解。
React 从来没有说过 “React 比原生操作 DOM 快”。React 的基本思维模式是每次有变动就整个重新渲染整个应用。如果没有 Virtual DOM，简单来想就是直接重置 innerHTML。很多人都没有意识到，在一个大型列表所有数据都变了的情况下，重置 innerHTML 其实是一个还算合理的操作... 真正的问题是在 “全部重新渲染” 的思维模式下，即使只有一行数据变了，它也需要重置整个 innerHTML，这时候显然就有大量的浪费。
我们可以比较一下 innerHTML vs. Virtual DOM 的重绘性能消耗：</li></ol> <ul><li>innerHTML:  render html string O(template size) + 重新创建所有 DOM 元素 O(DOM size)</li> <li>Virtual DOM: render Virtual DOM + diff O(template size) + 必要的 DOM 更新 O(DOM change)</li></ul> <p>Virtual DOM render + diff 显然比渲染 html 字符串要慢，但是！它依然是纯 js 层面的计算，比起后面的 DOM 操作来说，依然便宜了太多。可以看到，innerHTML 的总计算量不管是 js 计算还是 DOM 操作都是和整个界面的大小相关，但 Virtual DOM 的计算量里面，只有 js 计算和界面大小相关，DOM 操作是和数据的变动量相关的。前面说了，和 DOM 操作比起来，js 计算是极其便宜的。这才是为什么要有 Virtual DOM：它保证了 1）不管你的数据变化多少，每次重绘的性能都可以接受；2) 你依然可以用类似 innerHTML 的思路去写你的应用。
3. MVVM vs. Virtual DOM
相比起 React，其他 MVVM 系框架比如 Angular, Knockout 以及 Vue、Avalon 采用的都是数据绑定：通过 Directive/Binding 对象，观察数据变化并保留对实际 DOM 元素的引用，当有数据变化时进行对应的操作。MVVM 的变化检查是数据层面的，而 React 的检查是 DOM 结构层面的。MVVM 的性能也根据变动检测的实现原理有所不同：Angular 的脏检查使得任何变动都有固定的 O(watcher count) 的代价；Knockout/Vue/Avalon 都采用了依赖收集，在 js 和 DOM 层面都是 O(change)：</p> <ul><li>脏检查：scope digest O(watcher count) + 必要 DOM 更新 O(DOM change)</li> <li>依赖收集：重新收集依赖 O(data change) + 必要 DOM 更新 O(DOM change)
可以看到，Angular 最不效率的地方在于任何小变动都有的和 watcher 数量相关的性能代价。但是！当所有数据都变了的时候，Angular 其实并不吃亏。依赖收集在初始化和数据变化的时候都需要重新收集依赖，这个代价在小量更新的时候几乎可以忽略，但在数据量庞大的时候也会产生一定的消耗。
MVVM 渲染列表的时候，由于每一行都有自己的数据作用域，所以通常都是每一行有一个对应的 ViewModel 实例，或者是一个稍微轻量一些的利用原型继承的 &quot;scope&quot; 对象，但也有一定的代价。所以，MVVM 列表渲染的初始化几乎一定比 React 慢，因为创建 ViewModel / scope 实例比起 Virtual DOM 来说要昂贵很多。这里所有 MVVM 实现的一个共同问题就是在列表渲染的数据源变动时，尤其是当数据是全新的对象时，如何有效地复用已经创建的 ViewModel 实例和 DOM 元素。假如没有任何复用方面的优化，由于数据是 “全新” 的，MVVM 实际上需要销毁之前的所有实例，重新创建所有实例，最后再进行一次渲染！这就是为什么题目里链接的 angular/knockout 实现都相对比较慢。相比之下，React 的变动检查由于是 DOM 结构层面的，即使是全新的数据，只要最后渲染结果没变，那么就不需要做无用功。
Angular 和 Vue 都提供了列表重绘的优化机制，也就是 “提示” 框架如何有效地复用实例和 DOM 元素。比如数据库里的同一个对象，在两次前端 API 调用里面会成为不同的对象，但是它们依然有一样的 uid。这时候你就可以提示 track by uid 来让 Angular 知道，这两个对象其实是同一份数据。那么原来这份数据对应的实例和 DOM 元素都可以复用，只需要更新变动了的部分。或者，你也可以直接 track by $index 来进行 “原地复用”：直接根据在数组里的位置进行复用。在题目给出的例子里，如果 angular 实现加上 track by $index 的话，后续重绘是不会比 React 慢多少的。甚至在 dbmonster 测试中，Angular 和 Vue 用了 track by $index 以后都比 React 快: dbmon (注意 Angular 默认版本无优化，优化过的在下面）
顺道说一句，React 渲染列表的时候也需要提供 key 这个特殊 prop，本质上和 track-by 是一回事。</li></ul> <ol start="4"><li>性能比较也要看场合
在比较性能的时候，要分清楚初始渲染、小量数据更新、大量数据更新这些不同的场合。Virtual DOM、脏检查 MVVM、数据收集 MVVM 在不同场合各有不同的表现和不同的优化需求。Virtual DOM 为了提升小量数据更新时的性能，也需要针对性的优化，比如 shouldComponentUpdate 或是 immutable data。</li></ol> <ul><li>初始渲染：Virtual DOM &gt; 脏检查 &gt;= 依赖收集</li> <li>小量数据更新：依赖收集 &gt;&gt; Virtual DOM + 优化 &gt; 脏检查（无法优化） &gt; Virtual DOM 无优化</li> <li>大量数据更新：脏检查 + 优化 &gt;= 依赖收集 + 优化 &gt; Virtual DOM（无法/无需优化）&gt;&gt; MVVM 无优化
不要天真地以为 Virtual DOM 就是快，diff 不是免费的，batching 么 MVVM 也能做，而且最终 patch 的时候还不是要用原生 API。在我看来 Virtual DOM 真正的价值从来都不是性能，而是它 1) 为函数式的 UI 编程方式打开了大门；2) 可以渲染到 DOM 以外的 backend，比如 ReactNative。</li></ul> <ol start="5"><li>总结
以上这些比较，更多的是对于框架开发研究者提供一些参考。主流的框架 + 合理的优化，足以应对绝大部分应用的性能需求。如果是对性能有极致需求的特殊情况，其实应该牺牲一些可维护性采取手动优化：比如 Atom 编辑器在文件渲染的实现上放弃了 React 而采用了自己实现的 tile-based rendering；又比如在移动端需要 DOM-pooling 的虚拟滚动，不需要考虑顺序变化，可以绕过框架的内置实现自己搞一个。</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/24/2021, 3:59:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/articles/004_javascript/004013_80percent.html" class="prev">
        ⭐️[读]80%应聘者不及格系列：闭包
      </a></span> <span class="next"><a href="/articles/004_javascript/functional/compose.html">
        compose
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1690ea5b.js" defer></script><script src="/assets/js/2.8b426e0b.js" defer></script><script src="/assets/js/53.3736c0df.js" defer></script>
  </body>
</html>
