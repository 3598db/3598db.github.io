(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{381:function(t,a,s){"use strict";s.r(a);var e=s(42),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"localstorage-sessionstorage-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localstorage-sessionstorage-api"}},[t._v("#")]),t._v(" ⭐️LocalStorage & SessionStorage API")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#storage"}},[t._v("storage")])]),s("li",[s("a",{attrs:{href:"#属性"}},[t._v("属性")]),s("ul",[s("li",[s("a",{attrs:{href:"#storage-length-只读"}},[t._v("Storage.length 只读")])])])]),s("li",[s("a",{attrs:{href:"#方法"}},[t._v("方法")]),s("ul",[s("li",[s("a",{attrs:{href:"#storage-key"}},[t._v("Storage.key()")])]),s("li",[s("a",{attrs:{href:"#storage-getitem"}},[t._v("Storage.getItem()")])]),s("li",[s("a",{attrs:{href:"#storage-setitem"}},[t._v("Storage.setItem()")])]),s("li",[s("a",{attrs:{href:"#storage-removeitem"}},[t._v("Storage.removeItem()")])]),s("li",[s("a",{attrs:{href:"#storage-clear"}},[t._v("Storage.clear()")])])])]),s("li",[s("a",{attrs:{href:"#示例"}},[t._v("示例")]),s("ul",[s("li",[s("a",{attrs:{href:"#通过storageevent响应存储的变化"}},[t._v("通过StorageEvent响应存储的变化")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"storage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage"}},[t._v("#")]),t._v(" storage")]),t._v(" "),s("p",[t._v("作为 Web Storage API 的接口，Storage 提供了访问特定域名下的会话存储或本地存储的功能，例如，可以添加、修改或删除存储的数据项。")]),t._v(" "),s("p",[t._v("如果你想要操作一个域名的会话存储，可以使用 Window.sessionStorage；如果想要操作一个域名的本地存储，可以使用 Window.localStorage。")]),t._v(" "),s("h2",{attrs:{id:"属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),s("h3",{attrs:{id:"storage-length-只读"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage-length-只读"}},[t._v("#")]),t._v(" Storage.length 只读")]),t._v(" "),s("p",[t._v("返回一个整数，表示存储在 Storage 对象中的数据项数量。")]),t._v(" "),s("h2",{attrs:{id:"方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),s("h3",{attrs:{id:"storage-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage-key"}},[t._v("#")]),t._v(" Storage.key()")]),t._v(" "),s("p",[t._v("该方法接受一个数值 n 作为参数，并返回存储中的第 n 个键名。")]),t._v(" "),s("h3",{attrs:{id:"storage-getitem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage-getitem"}},[t._v("#")]),t._v(" Storage.getItem()")]),t._v(" "),s("p",[t._v("该方法接受一个键名作为参数，返回键名对应的值。")]),t._v(" "),s("h3",{attrs:{id:"storage-setitem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage-setitem"}},[t._v("#")]),t._v(" Storage.setItem()")]),t._v(" "),s("p",[t._v("该方法接受一个键名和值作为参数，将会把键值对添加到存储中，如果键名存在，则更新其对应的值。")]),t._v(" "),s("h3",{attrs:{id:"storage-removeitem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage-removeitem"}},[t._v("#")]),t._v(" Storage.removeItem()")]),t._v(" "),s("p",[t._v("该方法接受一个键名作为参数，并把该键名从存储中删除。")]),t._v(" "),s("h3",{attrs:{id:"storage-clear"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage-clear"}},[t._v("#")]),t._v(" Storage.clear()")]),t._v(" "),s("p",[t._v("调用该方法会清空存储中的所有键名。")]),t._v(" "),s("h2",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),s("h3",{attrs:{id:"通过storageevent响应存储的变化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过storageevent响应存储的变化"}},[t._v("#")]),t._v(" 通过StorageEvent响应存储的变化")]),t._v(" "),s("p",[t._v("无论何时，Storage 对象发生变化时（即创建/更新/删除数据项时，重复设置相同的键值不会触发该事件，Storage.clear() 方法至多触发一次该事件），StorageEvent事件会触发。"),s("strong",[t._v("在同一个页面内发生的改变不会起作用")]),t._v("——在相同域名下的其他页面（如一个新标签或 iframe）发生的改变才会起作用。在其他域名下的页面不能访问相同的 Storage 对象。")]),t._v(" "),s("p",[t._v("在事件结果页面中的 JavaScript 如下所示（可见 events.js）：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'storage'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.my-key'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.my-old'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.my-new'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.my-url'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.my-storage'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storageArea"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("这里，我们为 window 对象添加了一个事件监听器，在当前域名相关的 Storage 对象发生改变时该事件监听器会触发。正如你在上面看到的，此事件相关的事件对象有多个属性包含了有用的信息——改变的数据项的键，改变前的旧值，改变后的新值，改变的存储对象所在的文档的 URL，以及存储对象本身。")])])}),[],!1,null,null,null);a.default=r.exports}}]);