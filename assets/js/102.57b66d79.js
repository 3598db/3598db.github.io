(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{457:function(e,t,o){"use strict";o.r(t);var a=o(42),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"curl常用的十种方式"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#curl常用的十种方式"}},[e._v("#")]),e._v(" CURL常用的十种方式")]),e._v(" "),o("p"),o("div",{staticClass:"table-of-contents"},[o("ul",[o("li",[o("a",{attrs:{href:"#_1-获取页面内容"}},[e._v("1. 获取页面内容")])]),o("li",[o("a",{attrs:{href:"#_2-显示-http-头"}},[e._v("2. 显示 HTTP 头")])]),o("li",[o("a",{attrs:{href:"#_3-将链接保存到文件"}},[e._v("3. 将链接保存到文件")])]),o("li",[o("a",{attrs:{href:"#_4-同时下载多个文件"}},[e._v("4. 同时下载多个文件")])]),o("li",[o("a",{attrs:{href:"#_5-使用-l-跟随链接重定向"}},[e._v("5. 使用 -L 跟随链接重定向")])]),o("li",[o("a",{attrs:{href:"#_6-使用-a-自定义-user-agent"}},[e._v("6. 使用 -A 自定义 User-Agent")])]),o("li",[o("a",{attrs:{href:"#_7-使用-h-自定义-header"}},[e._v("7. 使用 -H 自定义 header")])]),o("li",[o("a",{attrs:{href:"#_8-使用-c-保存-cookie"}},[e._v("8. 使用 -c 保存 Cookie")])]),o("li",[o("a",{attrs:{href:"#_9-使用-b-读取-cookie"}},[e._v("9. 使用 -b 读取 Cookie")])]),o("li",[o("a",{attrs:{href:"#_10-使用-d-发送-post-请求"}},[e._v("10. 使用 -d 发送 POST 请求")])])])]),o("p"),e._v(" "),o("h2",{attrs:{id:"_1-获取页面内容"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取页面内容"}},[e._v("#")]),e._v(" 1. 获取页面内容")]),e._v(" "),o("p",[e._v("当我们不加任何选项使用 curl 时，默认会发送 GET 请求来获取链接内容到标准输出。")]),e._v(" "),o("p",[o("code",[e._v("curl http://www.codebelief.com")])]),e._v(" "),o("h2",{attrs:{id:"_2-显示-http-头"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_2-显示-http-头"}},[e._v("#")]),e._v(" 2. 显示 HTTP 头")]),e._v(" "),o("p",[e._v("如果我们只想要显示 HTTP 头，而不显示文件内容，可以使用 "),o("code",[e._v("-I")]),e._v(" 选项：")]),e._v(" "),o("p",[o("code",[e._v("curl -I http://www.codebelief.com")]),e._v("\n输出为：")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('HTTP/1.1 200 OK\nServer: nginx/1.10.3\nDate: Thu, 11 May 2017 08:24:45 GMT\nContent-Type: text/html; charset=utf-8\nContent-Length: 24206\nConnection: keep-alive\nX-Powered-By: Express\nCache-Control: public, max-age=0\nETag: W/"5e8e-Yw5ZdnVVly9/aEnMX7fVXQ"\nVary: Accept-Encoding\n也可以同时显示 HTTP 头和文件内容，使用 -i 选项：\n')])])]),o("p",[o("code",[e._v("curl -i http://www.codebelief.com")]),e._v("\n输出为：")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('HTTP/1.1 200 OK\nServer: nginx/1.10.3\nDate: Thu, 11 May 2017 08:25:46 GMT\nContent-Type: text/html; charset=utf-8\nContent-Length: 24206\nConnection: keep-alive\nX-Powered-By: Express\nCache-Control: public, max-age=0\nETag: W/"5e8e-Yw5ZdnVVly9/aEnMX7fVXQ"\nVary: Accept-Encoding\n\n<!DOCTYPE html>\n<html lang="en">\n......\n</html>\n')])])]),o("h2",{attrs:{id:"_3-将链接保存到文件"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_3-将链接保存到文件"}},[e._v("#")]),e._v(" 3. 将链接保存到文件")]),e._v(" "),o("p",[e._v("我们可以使用 > 符号将输出重定向到本地文件中。"),o("br"),e._v(" "),o("code",[e._v("curl http://www.codebelief.com > index.html")]),o("br"),e._v("\n也可以通过 curl 自带的 "),o("code",[e._v("-o/-O")]),e._v(" 选项将内容保存到文件中。"),o("br"),e._v(" "),o("code",[e._v("-o")]),e._v("（小写的 o）：结果会被保存到命令行中提供的文件名"),o("br"),e._v(" "),o("code",[e._v("-O")]),e._v("（大写的 O）：URL 中的文件名会被用作保存输出的文件名"),o("br"),e._v(" "),o("code",[e._v("curl -o index.html http://www.codebelief.com")]),o("br"),e._v(" "),o("code",[e._v("curl -O http://www.codebelief.com/page/2/")]),o("br"),e._v("\n注意：使用 "),o("code",[e._v("-O")]),e._v(" 选项时，必须确保链接末尾包含文件名，否则 curl 无法正确保存文件。如果遇到链接中无文件名的情况，应该使用 "),o("code",[e._v("-o")]),e._v(" 选项手动指定文件名，或使用重定向符号。")]),e._v(" "),o("h2",{attrs:{id:"_4-同时下载多个文件"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_4-同时下载多个文件"}},[e._v("#")]),e._v(" 4. 同时下载多个文件")]),e._v(" "),o("p",[e._v("我们可以使用 -o 或 -O 选项来同时指定多个链接，按照以下格式编写命令："),o("br"),e._v(" "),o("code",[e._v("curl -O http://www.codebelief.com/page/2/ -O http://www.codebelief.com/page/3/")]),o("br"),e._v("\n或者："),o("br"),e._v(" "),o("code",[e._v("curl -o page1.html http://www.codebelief.com/page/1/ -o page2.html http://www.codebelief.com/page/2/")])]),e._v(" "),o("h2",{attrs:{id:"_5-使用-l-跟随链接重定向"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用-l-跟随链接重定向"}},[e._v("#")]),e._v(" 5. 使用 -L 跟随链接重定向")]),e._v(" "),o("p",[e._v("如果直接使用 curl 打开某些被重定向后的链接，这种情况下就无法获取我们想要的网页内容。例如："),o("br"),e._v(" "),o("code",[e._v("curl http://codebelief.com")]),o("br"),e._v("\n会得到如下提示：")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('<html>\n<head><title>301 Moved Permanently</title></head>\n<body bgcolor="white">\n<center><h1>301 Moved Permanently</h1></center>\n<hr><center>nginx/1.10.3</center>\n</body>\n</html>\n')])])]),o("p",[e._v("而当我们通过浏览器打开该链接时，会自动跳转到 "),o("code",[e._v("http://www.codebelief.com")]),e._v("。此时我们想要 curl 做的，就是像浏览器一样跟随链接的跳转，获取最终的网页内容。我们可以在命令中添加 "),o("code",[e._v("-L")]),e._v(" 选项来跟随链接重定向："),o("br"),e._v(" "),o("code",[e._v("curl -L http://codebelief.com")]),o("br"),e._v("\n这样我们就能获取到经过重定向后的网页内容了。")]),e._v(" "),o("h2",{attrs:{id:"_6-使用-a-自定义-user-agent"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_6-使用-a-自定义-user-agent"}},[e._v("#")]),e._v(" 6. 使用 -A 自定义 User-Agent")]),e._v(" "),o("p",[e._v("我们可以使用 "),o("code",[e._v("-A")]),e._v(" 来自定义用户代理，例如下面的命令将伪装成安卓火狐浏览器对网页进行请求："),o("br"),e._v(" "),o("code",[e._v('curl -A "Mozilla/5.0 (Android; Mobile; rv:35.0) Gecko/35.0 Firefox/35.0" http://www.baidu.com')]),o("br"),e._v("\n下面我们会使用 -H 来实现同样的目的。")]),e._v(" "),o("h2",{attrs:{id:"_7-使用-h-自定义-header"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_7-使用-h-自定义-header"}},[e._v("#")]),e._v(" 7. 使用 -H 自定义 header")]),e._v(" "),o("p",[e._v("当我们需要传递特定的 header 的时候，可以仿照以下命令来写："),o("br"),e._v(" "),o("code",[e._v('curl -H "Referer: www.example.com" -H "User-Agent: Custom-User-Agent" http://www.baidu.com')]),o("br"),e._v("\n可以看到，当我们使用 "),o("code",[e._v("-H")]),e._v(' 来自定义 User-Agent 时，需要使用 "User-Agent: xxx" 的格式。'),o("br"),e._v("\n我们能够直接在 header 中传递 "),o("code",[e._v("Cookie")]),e._v("，格式与上面的例子一样："),o("br"),e._v(" "),o("code",[e._v('curl -H "Cookie: JSESSIONID=D0112A5063D938586B659EF8F939BE24" http://www.example.com')]),o("br"),e._v("\n另一种方式会在下面介绍。")]),e._v(" "),o("h2",{attrs:{id:"_8-使用-c-保存-cookie"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_8-使用-c-保存-cookie"}},[e._v("#")]),e._v(" 8. 使用 -c 保存 Cookie")]),e._v(" "),o("p",[e._v("当我们使用 cURL 访问页面的时候，默认是不会保存 Cookie 的。有些情况下我们希望保存 Cookie 以便下次访问时使用。例如登陆了某个网站，我们希望再次访问该网站时保持登陆的状态，这时就可以现将登陆时的 Cookie 保存起来，下次访问时再读取。"),o("br"),e._v(" "),o("code",[e._v("-c")]),e._v(" 后面跟上要保存的文件名。"),o("br"),e._v(" "),o("code",[e._v('curl -c "cookie-example" http://www.example.com')])]),e._v(" "),o("h2",{attrs:{id:"_9-使用-b-读取-cookie"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_9-使用-b-读取-cookie"}},[e._v("#")]),e._v(" 9. 使用 -b 读取 Cookie")]),e._v(" "),o("p",[e._v("前面讲到了使用 "),o("code",[e._v("-H")]),e._v(" 来发送 Cookie 的方法，这种方式是直接将 Cookie 字符串写在命令中。如果使用 "),o("code",[e._v("-b")]),e._v(" 来自定义 Cookie，命令如下："),o("br"),e._v(" "),o("code",[e._v('curl -b "JSESSIONID=D0112A5063D938586B659EF8F939BE24" http://www.example.com')]),o("br"),e._v("\n如果要从文件中读取 Cookie，"),o("code",[e._v("-H")]),e._v(" 就无能为力了，此时可以使用 "),o("code",[e._v("-b")]),e._v(" 来达到这一目的："),o("br"),e._v(" "),o("code",[e._v('curl -b "cookie-example" http://www.example.com')]),o("br"),e._v("\n即 "),o("code",[e._v("-b")]),e._v(" 后面既可以是 Cookie 字符串，也可以是保存了 Cookie 的文件名。")]),e._v(" "),o("h2",{attrs:{id:"_10-使用-d-发送-post-请求"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_10-使用-d-发送-post-请求"}},[e._v("#")]),e._v(" 10. 使用 -d 发送 POST 请求")]),e._v(" "),o("p",[e._v("我们以登陆网页为例来进行说明使用 cURL 发送 POST 请求的方法。假设有一个登录页面 "),o("code",[e._v("www.example.com/login")]),e._v("，只需要提交用户名和密码便可登录。我们可以使用 cURL 来完成这一 POST 请求，"),o("code",[e._v("-d")]),e._v(" 用于指定发送的数据，"),o("code",[e._v("-X")]),e._v(" 用于指定发送数据的方式："),o("br"),e._v(" "),o("code",[e._v('curl -d "userName=tom&passwd=123456" -X POST http://www.example.com/login')]),o("br"),e._v("\n在使用 -d 的情况下，如果省略 -X，则默认为 POST 方式："),o("br"),e._v(" "),o("code",[e._v('curl -d "userName=tom&passwd=123456" http://www.example.com/login')]),o("br"),e._v("\n强制使用 GET 方式"),o("br"),e._v("\n发送数据时，不仅可以使用 POST 方式，也可以使用 GET 方式，例如："),o("br"),e._v(" "),o("code",[e._v('curl -d "somedata" -X GET http://www.example.com/api')]),o("br"),e._v("\n或者使用 -G 选项："),o("br"),e._v(" "),o("code",[e._v('curl -d "somedata" -G http://www.example.com/api')]),o("br"),e._v("\n从文件中读取 data"),o("br"),e._v(" "),o("code",[e._v('curl -d "@data.txt" http://www.example.com/login')]),o("br"),e._v("\n带 Cookie 登录"),o("br"),e._v("\n当然，如果我们再次访问该网站，仍然会变成未登录的状态。我们可以用之前提到的方法保存 Cookie，在每次访问网站时都带上该 Cookie 以保持登录状态。"),o("br"),e._v(" "),o("code",[e._v('curl -c "cookie-login" -d "userName=tom&passwd=123456" http://www.example.com/login')]),o("br"),e._v("\n再次访问该网站时，使用以下命令："),o("br"),e._v(" "),o("code",[e._v('curl -b "cookie-login" http://www.example.com/login')]),o("br"),e._v("\n这样，就能保持访问的是登录后的页面了。")])])}),[],!1,null,null,null);t.default=r.exports}}]);